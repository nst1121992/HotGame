<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hot Couple - Google Login</title>
    <style>
        :root { --primary: #ff0055; --google-blue: #4285F4; }
        body { font-family: 'Arial', sans-serif; background: #0a0a0a; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .container { background: #1a1a1a; padding: 40px 30px; border-radius: 25px; border: 1px solid #333; width: 320px; text-align: center; display: none; }
        .active { display: block; }
        .btn-google { background: white; color: #444; padding: 12px; border-radius: 8px; border: none; width: 100%; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.3s; }
        .btn-google:hover { background: #eee; }
        .btn-google img { width: 20px; }
        .btn-main { background: var(--primary); color: white; padding: 15px; border-radius: 50px; border: none; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .user-avatar { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--primary); margin-bottom: 10px; }
        #loading-text { color: var(--primary); font-weight: bold; }
    </style>
</head>
<body>

    <div id="loading-section" class="container active">
        <p id="loading-text">ƒêANG KI·ªÇM TRA PHI√äN...</p>
    </div>

    <div id="auth-section" class="container">
        <h2 style="color: var(--primary); margin-bottom: 30px;">HOT COUPLE</h2>
        <p style="font-size: 14px; color: #aaa; margin-bottom: 20px;">Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ b·∫Øt ƒë·∫ßu th·ª≠ th√°ch</p>
        <button class="btn-google" id="loginBtn">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
            ƒêƒÉng nh·∫≠p v·ªõi Google
        </button>
    </div>

    <div id="game-section" class="container">
        <img id="user-photo" class="user-avatar" src="" alt="Avatar">
        <p id="user-name" style="margin: 5px 0; font-weight: bold;"></p>
        <h1 style="color: var(--primary);">üî• TH·ª¨ TH√ÅCH üî•</h1>
        <div id="challenge-box" style="background: white; color: black; padding: 25_px; border-radius: 15px; font-weight: bold; margin: 20px 0; min-height: 50px; display: flex; align-items: center; justify-content: center;">
            S·∫µn s√†ng ch∆∞a?
        </div>
        <button class="btn-main" id="spinBtn">XOAY NGAY üé≤</button>
        <button id="logoutBtn" style="background:none; border:none; color: #555; margin-top: 25px; cursor:pointer; text-decoration: underline;">ƒêƒÉng xu·∫•t</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDlswEZUfys_PJ7337YOz4t_MaHwjnuNDY",
            authDomain: "hot-couple-game-21db1.firebaseapp.com",
            projectId: "hot-couple-game-21db1",
            storageBucket: "hot-couple-game-21db1.firebasestorage.app",
            messagingSenderId: "1074792311940",
            appId: "1:1074792311940:web:21118ed565a30ca33126d1",
            measurementId: "G-BFMM51ZKND"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        const showSection = (id) => {
            document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        };

        // Ki·ªÉm tra ƒëƒÉng nh·∫≠p
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // THAY EMAIL C·ª¶A B·∫†N V√ÄO ƒê√ÇY ƒê·ªÇ CH·ªà M√åNH B·∫†N V√ÄO ƒê∆Ø·ª¢C
                const myEmail = "nst1121992@gmail.com"; 
                
                if (user.email === myEmail || myEmail === "email-cua-ban@gmail.com") {
                    document.getElementById('user-name').innerText = user.displayName;
                    document.getElementById('user-photo').src = user.photoURL;
                    showSection('game-section');
                } else {
                    alert("Truy c·∫≠p b·ªã t·ª´ ch·ªëi!");
                    signOut(auth);
                }
            } else {
                showSection('auth-section');
            }
        });

        document.getElementById('loginBtn').onclick = () => signInWithPopup(auth, provider);
        document.getElementById('logoutBtn').onclick = () => signOut(auth);
        
        document.getElementById('spinBtn').onclick = () => {
            const challenges = ["H√¥n nh·∫π v√†o m√°", "Nh√¨n nhau 1 ph√∫t", "C√πng u·ªëng 1 ng·ª•m n∆∞·ªõc", "K·ªÉ 1 b√≠ m·∫≠t"];
            const random = challenges[Math.floor(Math.random() * challenges.length)];
            document.getElementById('challenge-box').innerText = random;
        };
    </script>
</body>
</html>
